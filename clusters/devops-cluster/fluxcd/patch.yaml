apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata: 
  name: react-ci-cd-test-patch
  namespace: flux-system
spec: 
  interval: 1m0s
  path: "./k8s/"
  prune: true
  sourceRef:
    kind: GitRepository
    name: react-ci-cd-app
  targetNamespace: flux-system
  # Debut du patch
  # patches:
  #   - patch: |-
  #       apiVersion: apps/v1
  #       kind: Deployment
  #       metadata:
  #         namespace: default
  #         name: react-ci-cd-deployment
  #       spec:
  #         replicas: 3
  #     target:
  #       kind: Deployment
  #       name: react-ci-cd-deployment
  #       namespace: default
  patches:
    - patch: |
        - op: replace
          path: /spec
          value:
            replicas: 3
      target:
        kind: Deployment
        name: react-ci-cd-deployment
        namespace: default